"use strict";(self.webpackChunkSkillwBlog=self.webpackChunkSkillwBlog||[]).push([[1765],{637:(n,a,r)=>{r.r(a),r.d(a,{assets:()=>p,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>v});var e=r(4848),t=r(8453);const i={sidebar_position:4,title:"Nashorn"},o=void 0,s={id:"Pouvoir/\u811a\u672c\u57fa\u7840/nashorn",title:"Nashorn",description:"Nashorn \u662f\u4e00\u4e2a\u57fa\u4e8e JVM \u7684\u8f7b\u91cf\u7ea7\u9ad8\u6027\u80fd\u7684 JavaScript \u8fd0\u884c\u73af\u5883\u3002",source:"@site/docs/Pouvoir/\u811a\u672c\u57fa\u7840/nashorn.md",sourceDirName:"Pouvoir/\u811a\u672c\u57fa\u7840",slug:"/Pouvoir/\u811a\u672c\u57fa\u7840/nashorn",permalink:"/docs/Pouvoir/\u811a\u672c\u57fa\u7840/nashorn",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Pouvoir/\u811a\u672c\u57fa\u7840/nashorn.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,title:"Nashorn"},sidebar:"tutorialSidebar",previous:{title:"\u63a7\u5236\u6d41\u7a0b",permalink:"/docs/Pouvoir/\u811a\u672c\u57fa\u7840/\u63a7\u5236\u6d41\u7a0b"},next:{title:"\u811a\u672c\u5ef6\u4f38",permalink:"/docs/category/\u811a\u672c\u5ef6\u4f38"}},p={},v=[];function l(n){const a={code:"code",p:"p",pre:"pre",...(0,t.R)(),...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(a.p,{children:"Nashorn \u662f\u4e00\u4e2a\u57fa\u4e8e JVM \u7684\u8f7b\u91cf\u7ea7\u9ad8\u6027\u80fd\u7684 JavaScript \u8fd0\u884c\u73af\u5883\u3002"}),"\n",(0,e.jsx)(a.p,{children:"\u4ee5\u4e0b\u662f\u5176\u7279\u6027"}),"\n",(0,e.jsx)(a.pre,{children:(0,e.jsx)(a.code,{className:"language-javascript",children:'//\u67e5\u770b\u5305\u7c7b\u578b\nprint(java);\nprint(java.lang);\nprint(typeof java.lang);\nprint(typeof java.lang.System);\nprint(typeof java.lang.System == \'function\');\n\n\n//\u521b\u5efaJava\u5bf9\u8c61\nvar HashMap = Java.type("java.util.HashMap");\nvar mapDef = new HashMap();\nvar map100 = new HashMap(100);\nprint(Java.type("java.util.Map").Entry);\nprint(\'\u5185\u90e8\u7c7b\uff1a\' + Java.type("java.util.Map$Entry")); //\u5b58\u53d6\u5185\u90e8\u7c7b\n\n\n//JavaString\u6e2c\u8bd5\nvar StringCls = Java.type("java.lang.String");\nvar str = new StringCls("Hello");\nstr = str.toUpperCase();\nprint(\'Upper: \' + str);\n\n\n//\u6e2c\u8bd5\u8f93\u51fa\nJava.type("java.lang.System").out.println(10);\nJava.type("java.lang.System").out["println(double)"](10.92929);\n\n\n//\u65e5\u671f\nvar Date = Java.type(\'java.util.Date\');\nvar date = new Date();\nprint(\'year:\' + date.year);\ndate.year += 1000;\nprint(\'new year:\' + date.year);\n\n\n//\u5b57\u7b26\u4e32\u5904\u7406\nprint("   hehe".trimLeft());            // hehe\nprint("hehe    ".trimRight() + "he");   // hehehe\n\n\n//\u7b80\u5355\u51fd\u6570\u7684\u5b9a\u4e49\nfunction sqr(x) x * x;\nprint(sqr(3));    // 9\n\n\n//\u628a\u4e0d\u540c\u5bf9\u8c61\u7684\u5c5e\u6027\u7ed1\u5b9a\nvar o1 = {age: 15};\nvar o2 = {name: \'bar\'};\nObject.bindProperties(o1, o2);   //\u7ed1\u5b9ao2\u5230o1\u4e0a\nprint(\'\u5bf9\u8c61\u7684o1\u5c5e\u6027\uff1a\' + o1.name + \', \' + o1.age);    //\u5bf9\u8c61\u7684o1\u5c5e\u6027\uff1abar, 15\nprint(\'\u5bf9\u8c61\u7684o2\u5c5e\u6027\uff1a\' + o2.name + \', \' + o2.age);    //\u5bf9\u8c61\u7684o2\u5c5e\u6027\uff1abar, undefined\no1.name = \'BAM\';\nprint(\'\u5bf9\u8c61\u7684o2\u5c5e\u6027\uff1a\' + o2.name);    //BAM\n\n\n//load\u547d\u4ee4\nload(\'http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js\');\nvar odds = _.filter([1, 2, 3, 4, 5, 6], function (num) {\n    return num % 2 == 1;\n});\nprint(\'underscore\u7ed3\u679c\uff1a\' + odds);  // 1, 3, 5\n\n\n//Lamda\u8868\u8fbe\u5f0f\nvar map = Array.prototype.map;\nvar names = ["john", "jerry", "bob"];\n//\u8c03\u7528\u533f\u540d\u51fd\u6570\u3002\u8f93\u5165\u53c3\u6570\u662fnames\uff0c\u533f\u540d\u51fd\u6570\u81ea\u5df1\u4e3b\u52a8\u904d\u5386names\u7684\u5185\u5bb9name\uff0c\u5e76\u8ba1\u7b97\u5176\u957f\u5ea6\nvar a = map.call(names, function(name) { return name.length() });\nprint(\'Lamda\u8868\u8fbe\u5f0f\uff1a\' + a);\n\n\n//Java\u6570\u7ec4\nvar IntArray = Java.type("int[]");\nvar iarr = new IntArray(10);\niarr[1] = 5;\niarr[2] = 3;\niarr[3] = iarr[1] + iarr[2];\nprint(\'5 + 3 = \' + iarr[3]);\nprint(\'iarr.length= \' + iarr.length);\nprint(iarr[0]);\nfor (var i in iarr) print(i);  //\u53d6\u5f97\u7d22\u5f15\u4e0b\u6807\nfor each(var i in iarr) print(i); //\u53d6\u5f97\u503c\n\n\n//try...catch\u4f7f\u7528\u65b9\u6cd5\ntry {\n  iarr[10] = 5;\n}\ncatch (e) {\n  print(\'try...catch...\u4f7f\u7528\u65b9\u6cd5\uff1a\' + e.message);\n  print(e.lineNumber)\n  print(e.columnNumber)\n  print(e.fileName)\n}\n\n\n//Java.to\u5b9e\u73b0javascript\u5230java\u6570\u7ec4\u7c7b\u578b\u7684\u8f6c\u6362\nvar jsVals = ["a", "bc", "de"];\nvar JString = Java.type("java.lang.String[]");\nvar jVals = Java.to(jsVals, JString);\n\n\n//\u6570\u636e\u7c7b\u578b\u8f6c\u6362\nvar ival = 10;\nprint(ival.class);\nival = Number(ival);\nprint(ival.class);\n\n\n//Java\u96c6\u5408\u4f7f\u7528\nvar ArrayList = Java.type("java.util.ArrayList");\nvar list = new ArrayList();\nlist.add("zhang");\nlist.add("wang");\nfor each(var i in list) print(i);\n\n\n//HashMap\nprint();\nprint(\'HashMap demo\');\nvar HashMap = Java.type("java.util.HashMap");\nvar hm = new HashMap();\nhm.put(\'zhangsan\', 133992);\nhm.put(\'lisi\', {name:\'martin\', sex:\'male\'});\nfor each (key in hm.keySet()) print(\'key: \' + key);\nfor each (val in hm.values()) print(\'val: \' + val + \' \' + typeof val);\n\n\n//\u5b58\u53d6\u7c7b\u53ca\u4e8b\u5b9e\u4e0a\u4f8b\u6210\u5458\nprint(\'pi:\' + Java.type("java.lang.Math").PI);\nprint(\'time:\' + Java.type("java.lang.System").currentTimeMillis())\nprint(\'ok\');\n\n\n\n\n//\u7ee7\u627f\u548c\u6269\u5c55\u7ebf\u7a0b\u7c7b\nvar Run = Java.type("java.lang.Runnable");\nvar MyRun = Java.extend(Run, {\n    run: function() {\n        print("I am running in separate thread");\n    }\n});\n//\u6784\u9020\nvar Thread = Java.type("java.lang.Thread");\nvar th = new Thread(new MyRun());\nth.run();\n\n\nvar th1 = new Thread(new MyRun());\nth1.run();\n\n\n//super\u8c03\u7528\u7236\u7c7b\u65b9\u6cd5\nvar SuperRunner = Java.type(\'java.lang.Thread\');\nvar Runner = Java.extend(SuperRunner);\nvar runner = new Runner() {\n    run: function() {\n        Java.super(runner).run();\n        print(\'on my run\');\n    }\n}\nrunner.run();\n\n\n\n\n//\u7528Javascript\u5b9a\u4e49\u4e00\u4e2a\u7c7bDog\nfunction Dog(name) {\n  this.name = name;\n  this.bark = function() {\n    return "Hello, " + this.name;\n  }\n}\n\n\nvar dog = new Dog("martin");\nprint("dog bark function: " + dog.bark());\n\n\n//\u600e\u6837\u7ee7\u627fObject\u7c7b\n//from: https://wiki.openjdk.java.net/display/Nashorn/Nashorn+extensions\n/*\u6ca1\u6a21\u4eff\u6210\u529f\nvar Object = Java.type("java.lang.Object");\nvar Dog = Java.extend(Object);\nvar dog = new Dog() {\n  bark : function(name) {\n    return "hello, " + name;\n  }\n}\nprint(\'\u72d7\u53eb\uff1a\' + dog.bark(\'martin\'));\n*/\n\n\n//Packages\u4f7f\u7528\u65b9\u6cd5\nvar Vector = Packages.java.util.Vector;\n// but short-cuts defined for important package prefixes like\n//    Packages.java, Packages.javax, Packages.com\n//    Packages.edu, Packages.javafx, Packages.org\nvar JFrame = javax.swing.JFrame;  // javax == Packages.javax\nvar List = java.util.List;        // java == Packages.java\n\n\n//exit(1);  //\u544a\u8bc9\u5f15\u64ce\u4ee3\u7801\u8fd0\u884c\u5230\u8fd9\u91cc\n//quit(1);\n\n\n\n\n//\u5bfc\u5165\u8303\u56f4---\u96c6\u4e2d\u4e00\u6b21\u5bfc\u5165--JavaImporter\u548cwith\u4f7f\u7528\u65b9\u6cd5\nvar imports = new JavaImporter(java.io, java.lang);\nwith (imports) {\n    var file = new File(__FILE__);  //\u67e5\u627e\u6211\u5728\u54ea\u91cc\uff1f\n    System.out.println(\'\u54ea\u91cc: \' + file.getAbsolutePath());   //\u5185\u5bb9\u6bd4\u8f03\u53e4\u602a\n    // /path/to/my/script.js\n}\n\n\nvar CollectionsAndFiles = new JavaImporter(\n    java.util,\n    java.io,\n    java.nio);\nwith (CollectionsAndFiles) {\n  var files = new LinkedHashSet();\n  files.add(new File("Plop"));\n  files.add(new File("Foo"));\n  files.add(new File("w00t.js"));\n}\n\n\n//__LINE__\u663e\u793a\u5f53\u524d\u4ee3\u7801\u884c\u6570\uff0c\u7528\u4e8e\u8c03\u8bd5\u6bd4\u8f03\u597d\nprint(__FILE__, __LINE__, __DIR__);\n\n'})})]})}function u(n={}){const{wrapper:a}={...(0,t.R)(),...n.components};return a?(0,e.jsx)(a,{...n,children:(0,e.jsx)(l,{...n})}):l(n)}},8453:(n,a,r)=>{r.d(a,{R:()=>o,x:()=>s});var e=r(6540);const t={},i=e.createContext(t);function o(n){const a=e.useContext(i);return e.useMemo((function(){return"function"==typeof n?n(a):{...a,...n}}),[a,n])}function s(n){let a;return a=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:o(n.components),e.createElement(i.Provider,{value:a},n.children)}}}]);